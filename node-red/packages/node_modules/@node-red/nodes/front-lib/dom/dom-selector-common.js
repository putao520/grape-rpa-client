function findDomAttr(tagAndType){
    // let _type = ""
    const _attr = {}
    const match = tagAndType.match(/(\[@[0-9A-Za-z.@='']+\])/g)
    if( match && match.length > 0){
        // _type = match[0].match(/(\'.*\')/g)[0].replace(/\'/g, "")
        for(let i =0; i < match.length; i++){
            const v = match[i]
            if( v.startsWith("[@") ){
                const _v = v.substring(2, v.length - 1)
                const meta = _v.split("=")
                const val = meta.length > 1 ? meta[1].replace(/\'/g, "").replace(/\"/g, "") : ""
                _attr[meta[0]] = val
            }
        }
    }
    return _attr
}

function findInputType(tagAndType, _self){
    const attr = (_self && _self.__allProps) || {}
    let _type = attr.hasOwnProperty('type') ? attr['type'] : ''
    return {
        inputType: _type,
        attrObject: attr,
    }
}

function getTagName(v){
    const i = v.indexOf('[')
    return i >=0 ? v.substring(0, v.indexOf('[')) : v
}

function findSpecTagAndType(selector, htmlTag, _self){
    const arr = selector.split("/");
    for(let i = (arr.length - 1); i >= 0; i--){
        const item = arr[i]
        const v = getTagName(item)
        if( htmlTag.indexOf(v) >= 0 ){
            const {inputType, attrObject} = findInputType(item, _self)
            return {
                tagName: v,
                inputType,
                attrObject
            }
        }
    }
    return null
}
