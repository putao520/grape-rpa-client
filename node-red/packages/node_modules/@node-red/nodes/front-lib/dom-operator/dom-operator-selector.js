const specOperatorHtmlTag = [
    "select",
    "input",
    "textarea",
    "img",
    "video",
    "audio",
]

/**
 * @param {operatorFormSwitch} operatorHandler          dom操作管理对象
 * @param {string} input_selector           xpath选择器输入框DOM
 * @param {string} input_operator           operator候选项输入框DOM
 * */
function init_operator_selector(operatorHandler, input_selector, input_operator, _self){
    $(input_operator).typedInput({
        types: [operatorHandler.appendCommonOperators([])]
    })
    const handler = function(){
        const selector = $(input_selector).val();
        if( selector ){
            const r = findSpecTagAndType(selector, specOperatorHtmlTag, _self)
            if( r ){
                const {tagName, inputType, attrObject} = r
                console.log(`tagName: ${tagName}, inputType: ${inputType}, attrObject: ${JSON.stringify(attrObject)}`)
                const arr = operatorHandler.getTypedInput(tagName, inputType, attrObject)
                $(input_operator).typedInput('types', [arr])
                $(input_operator).typedInput('value',arr.value);
                return;
            }
            $(input_operator).typedInput('types', [
                operatorHandler.appendCommonOperators([])
            ])
        }
    }
    $(input_selector).on('keyup', function (e) {
        handler();
    });
    handler();
}
