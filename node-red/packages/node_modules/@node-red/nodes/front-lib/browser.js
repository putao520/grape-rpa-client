function getOpeningPageNodes(node, red){
    const allUpstreamNodes = red.nodes.getAllUpstreamNodes(node)
    const openBrowserNodes = {}
    for(let n of allUpstreamNodes){
        if( n.type === 'open-url' && n.browserName && String(n.browserName).length > 0) { // 是打开网页组件
            openBrowserNodes[n.browserName] = n
        }
    }
    for(let n of allUpstreamNodes){
        if( n.type === 'close-url' && n.browserName && String(n.browserName).length > 0) { // 是关闭网页
            if( openBrowserNodes[n.browserName] ){
                delete openBrowserNodes[n.browserName]
            }
        }
    }
    return openBrowserNodes
}

// 遍历前后组件获得网页库
function init_browser(node, red, selector){
    const nodes = getOpeningPageNodes(node, red)
    const key_it = Object.keys(nodes)
    if(key_it.length > 0){
        const hunger = $(selector)
        if( hunger.length > 0 ){
            hunger.html("")
            for(let key of key_it){
                // const n = nodes[key]
                if( key ) {
                    hunger.append(`<option value='${key}'>${key}</option>`)
                }
            }
        }
    }
}
