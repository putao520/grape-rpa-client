<script type="text/javascript">
    RED.nodes.registerType('open-url',{
        category: 'browser',
        color: '#a6bbcf',
        defaults: {
            url: {value:"", required:true},
            urlType: {value:"http"},
            browserName: {value:"", required:true},
            mode: {value: true}
        },
        inputs:1,
        outputs:1,
        icon: "file.png",
        paletteLabel: RED._("node-red:browser.open-url"),
        label: function() {
            const url = this.url.length > 30 ? this.url.substring(0, 30) + "..." : this.url;
            return (url ? `${this._("browser.label.open")}:${this.browserName}[${url}]` : this._("browser.open-url"));
        },
        oneditprepare: function () {
            InitNamed("#node-input-browserName", this.browserName, "browser.label.name")
            init_variable_library_single(this, RED, "#node-input-urlSelector", "#node-input-url", "#node-url");
        },
    });
</script>

<script type="text/html" data-template-name="open-url">
    <div class="form-row">
        <label><i class="fa fa-tag"></i><span data-i18n="browser.label.mode"></span></label>
        <input style="width:20px; vertical-align:baseline; margin-right:5px;" type="checkbox" id="node-input-mode"><label style="width:auto; margin-top:7px;" for="node-input-mode"><span data-i18n="browser.mode.hide"></span></label><br/>
    </div>
    <!-- 变量选择器 -->
    <div class="form-row">
        <label for="node-input-urlSelector"><i class="fa fa-tag"></i><span data-i18n="browser.label.urlSelector"></span></label>
        <input type="text" id="node-input-urlSelector">
    </div>
    <div class="form-row" id="node-url">
        <label for="node-input-url"><i class="fa fa-tag"></i><span data-i18n="browser.label.url"></span></label>
        <input type="text" id="node-input-url">
        <input type="hidden" id="node-input-urlType">
    </div>
    <div class="form-row">
        <label for="node-input-browserName"><i class="fa fa-tag"></i><span data-i18n="browser.label.browserName"></span></label>
        <input type="text" id="node-input-browserName">
    </div>
</script>

<!-- close -->
<script type="text/javascript">
    RED.nodes.registerType('close-url',{
        category: 'browser',
        color: '#a6bbcf',
        defaults: {
            browserName:{value:"", required:true},
            debug:{value: false}
        },
        inputs:1,
        outputs:1,
        icon: "file.png",
        paletteLabel: RED._("node-red:browser.close-url"),
        label: function() {
            return this.browserName ? `${this._("browser.label.close")}:${this.browserName}` : this._("browser.close-url");
        },
        oneditprepare: function (){
            // 浏览器载入
            init_browser(this, RED, "#node-input-browserName")
        }
    });
</script>

<script type="text/html" data-template-name="close-url">
    <div class="form-row">
        <label for="node-input-browserName"><i class="fa fa-tag"></i><span data-i18n="browser.label.browserName"></span></label>
        <select id="node-input-browserName">
        </select>
    </div>
    <div class="form-row">
        <label><i class="fa fa-tag"></i><span data-i18n="browser.label.debug"></span></label>
        <input style="width:20px; vertical-align:baseline; margin-right:5px;" type="checkbox" id="node-input-debug"><label style="width:auto; margin-top:7px;" for="node-input-debug"><span data-i18n="browser.debug.enable"></span></label><br/>
    </div>
</script>
